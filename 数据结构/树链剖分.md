## 熟练剖分
### 轻重链剖分
剖分：求重链 $+$ 链分解
```cpp
int idx;// dfs序辅助变量
vector<int> v[N]; 
int a[N],ta[N];// 节点值 映射dfn值
int hson[N],top[N],sz[N];// 重儿子 链头 子树大小
int fa[N],dfn[N],dep[N];// 父节点 dfs序 深度

void dfs_size(int p,int lp)// 求重链
{
	fa[p] = lp;
	dep[p] = dep[lp] + 1;
	sz[p] = 1;
	for(auto &i : v[p])
	{
		if(i == lp)	continue;
		dfs_size(i,p);
		sz[p] += sz[i];
		if(sz[hson[p]] < sz[i])	hson[p] = i;
	}
}

void dfs_chain(int p,int tp)// 链分解
{
	top[p] = tp;
	dfn[p] = ++ idx;
	ta[idx] = a[p];
	if(!hson[p])	return;
	dfs_chain(hson[p],tp);
	for(auto i : v[p])
	{
		if(i == fa[p] || i == hson[p])	continue;
		dfs_chain(i,i);
	}
}

void put_path(int x,int y)
{
    while(top[x] != top[y])
	{
		if(dep[top[x]] < dep[top[y]])	swap(x,y);
		/*
        put(dfn[top[x]],dfn[x]);
        */
		x = fa[top[x]];
	}
	if(dep[x] > dep[y])	swap(x,y);
	// put(dfn[x],dfn[y],z);
}
```