## 莫队
本质是分块
### 普通莫队
以求区间和为例
根据询问的左端点分块，每块内根据右端点排序。
这样每个块的查询可与保证在log内

```cpp
struct node
{
	int l,r,id;
}block[N];

int n,q,num,k;
int a[N], ans[N], cnt[M], belong[N];

void add(int p)
{
	if(!cnt[a[p]])	num ++;
	cnt[a[p]] ++;
}

void del(int p)
{
	cnt[a[p]] --;
	if(!cnt[a[p]])	num --;
}

signed main(void)
{
	Start;
	cin >> n;
	k = sqrt(n-1)+1;
	for(int i=1;i<=n;++i)	cin >> a[i];
	for(int i=1;i<=n;++i)	belong[i] = (i-1)/k;
	cin >> q;
	for(int i=1;i<=q;++i)
	{
		cin >> block[i].l >> block[i].r;
		block[i].id = i;
	}
	sort(block+1,block+q+1,[](node a,node b)
	{
		return (belong[a.l] == belong[b.l] ? (a.r == b.r ? a.id < b.id : a.r < b.r) : belong[a.l] < belong[b.l]);
	});
	int l = 1,r = 0;
	for(int i=1;i<=q;++i)
	{
		int be = block[i].l, ed = block[i].r;
		while(l < be)	del(l ++);
		while(l > be)	add(-- l);
		while(r < ed)	add(++ r);
		while(r > ed)	del(r --);
		ans[block[i].id] = num;
	}
	for(int i=1;i<=q;++i)	cout << ans[i] << '\n';
	return 0;
}
```
